sap.ui.define(["ui5/ogarpt/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/model/odata/v2/ODataModel","sap/m/Dialog","sap/m/List","sap/m/StandardListItem","sap/m/Button","sap/m/Input","sap/ui/table/Table","sap/ui/table/Column","sap/m/Text","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,o,s,l,a,r,i,p,d,u,c){"use strict";return e.extend("ui5.ogarpt.controller.formSections.SectionA",{formatter:{toRadioButtonIndex:function(e){if(e==="Y"||e==="1"){return 0}else if(e==="N"||e==="0"){return 1}return-1}},onInit:function(){},onValueHelpRequest:function(e){const t=e.getSource();var n=this;const s=function(){return new sap.m.Table({mode:"SingleSelectMaster",items:{path:"VendorModel>/results",template:new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{VendorModel>Kunnr}"}),new sap.m.Text({text:"{VendorModel>Name1}"}),new sap.m.Text({text:"{VendorModel>Land1}"}),new sap.m.Text({text:"{VendorModel>Stras}"})]})},columns:[new sap.m.Column({header:new d({text:"No"})}),new sap.m.Column({header:new d({text:"Name"})}),new sap.m.Column({header:new d({text:"Country"})}),new sap.m.Column({header:new d({text:"Address"})})],selectionChange:function(e){var o=e.getParameter("listItem");var s=o.getCells();t.setValue(s[0].getText());const l=o.getBindingContext("VendorModel");const a=n.getView().getModel("submitData");const r=l.getProperty("Name1");a.setProperty("/VendorName",r);const i=l.getProperty("Stras");a.setProperty("/VendorAddress1",i);const p=l.getProperty("Telf1");a.setProperty("/ZVENDOR_TELEPHONE",p);const d=l.getProperty("Telfx");a.setProperty("/ZVENDOR_FAX",d);n._VendorValueHelpDialog.close()}})};if(!this._VendorValueHelpDialog){this._oTable=s();this._VendorValueHelpDialog=new o({title:"Select Vendor",type:"Standard",state:"None",stretchOnPhone:true,contentWidth:"600px",contentHeight:"400px",buttons:[new a({text:"Confirm",press:function(){const e=this._VendorValueHelpDialog.getContent()[1];const n=e.getSelectedItem();if(n){const e=n.getBindingContext("VendorModel");const o=e.getProperty("lifnr");t.setValue(o);const s=this.getView().getModel("submitData");const l=e.getProperty("Name1");s.setProperty("/VendorName",l)}this._VendorValueHelpDialog.close()}.bind(this)}),new a({text:"Cancel",press:function(){this._VendorValueHelpDialog.close()}.bind(this)})],content:[new r({placeholder:"Enter Vendor number or name",liveChange:function(e){const t=e.getSource().getValue();this._filterVendors(t)}.bind(this)}),this._oTable]});this.getView().addDependent(this._VendorValueHelpDialog)}this._VendorValueHelpDialog.open()},onPlantValueHelpRequest:function(e){const t=e.getSource();var n=this;if(!this._plantValueHelpDialog){this._plantValueHelpDialog=new o({title:"Choose Plant",type:"Standard",state:"None",stretchOnPhone:true,contentWidth:"600px",contentHeight:"400px",buttons:[new a({text:"Confirm",press:function(){const e=this._plantValueHelpDialog.getContent()[1];const n=e.getSelectedItem();if(n){const e=n.getBindingContext("plantModel");const o=e.getProperty("Werks");t.setValue(o)}this._plantValueHelpDialog.close()}.bind(this)}),new a({text:"Cancel",press:function(){this._plantValueHelpDialog.close()}.bind(this)})],content:[new r({placeholder:"Enter plant number or name",liveChange:function(e){const t=e.getSource().getValue();this._filterPlants(t)}.bind(this)}),new sap.m.Table({mode:"SingleSelectMaster",items:{path:"plantModel>/results",template:new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{plantModel>Werks}"}),new sap.m.Text({text:"{plantModel>Name1}"}),new sap.m.Text({text:"{plantModel>Stras}"})]})},columns:[new sap.m.Column({header:new d({text:"No"})}),new sap.m.Column({header:new d({text:"Name"})}),new sap.m.Column({header:new d({text:"Address"})})],selectionChange:function(e){var o=e.getParameter("listItem");var s=o.getCells();t.setValue(s[0].getText());const l=o.getBindingContext("plantModel");const a=n.getView().getModel("submitData");const r=l.getProperty("Stras");a.setProperty("/plantAddress1",r);n._plantValueHelpDialog.close()}})]});this.getView().addDependent(this._plantValueHelpDialog)}this._plantValueHelpDialog.open()},_filterPlants:function(e){debugger;const t=this.getView().getModel("plantModel");if(!e){return}const n="/PLANTSet";const o=[];if(e){o.push(new sap.ui.model.Filter("Werks",sap.ui.model.FilterOperator.Contains,e));o.push(new sap.ui.model.Filter("Name1",sap.ui.model.FilterOperator.Contains,e))}const s=new sap.ui.model.Filter({filters:o,and:false});t.read(n,{filters:[s],success:function(e){console.log("过滤后的工厂数据:",e);t.setProperty("/result",e.results)}.bind(this),error:function(e){console.error("获取工厂数据失败:",e);sap.m.MessageToast.show("获取工厂数据失败: "+e.message)}})},_filterVendors:function(e){const t=[];if(e){t.push(new u("Name1",c.Contains,e))}this._oTable.getBinding("items").filter(t)},handleAdd:function(){const e=this.getView().getModel("items");const t=e.getProperty("/results");const n={Vbeln:""};t.push(n);e.setProperty("/results",t)},handleDelete:function(){const e=this.getView().getModel("items");const t=this.byId("EditableTable");const n=t.getItems().indexOf(t.getSelectedItem());const o=e.getProperty("/results");o.splice(n,1);e.setProperty("/results",o)}})});
//# sourceMappingURL=SectionA.controller.js.map